# 구현 방향

- 도메인 주도 개발 방식을 준수하여 개발

  - 외부 인프라를 이용하지 않고, 애그리거트의 ID를 생성하고 저장하는 방법을 사용
    - 애그리거트의 ID는 네이버의 nanoid 라이브러리를 사용하여 생성
    - 애그리거트의 ID는 애그리거트를 저장하는 리포지토리에서 생성하고 저장
  - 어그리거트의 생애주기를 관리하는 Command 와 조회를 위한 Query 를 분리
    - 어그리거트의 생애주기를 관리하는 Command 는 도메인 규칙을 위한 메서드를 포함
    - 어그리거트의 조회를 위한 Query 는 도메인 규칙을 포함하지 않고, 단순히 데이터를 조회하는 메서드만 포함
  - 외부 도메인 / 서비스를 사용해야 하는 경우 자신의 도메인 영역을 지키고 의존관계를 느슨하게 하기위해, 의존성 역전 원칙을 이용해 도메인 영역에 인터페이스를 정의하고, 구현체는 외부(인프라 영역)에 구현체를 둠

- 미래 확장을 고려하여 설계
  - command 와 query 를 분리하여 설계하여, 조회 기능의 확장을 고려
  - 마이크로 서비스, 멀티모듈 아키텍처를 고려하여 도메인 영역을 지키고 의존관계를 느슨하게 함

# 구현 모듈

- Catalog

  - 상품 카탈로그 도메인으로 상품, 브랜드, 카테고리를 관리
  - 상품이 추가되면, 인프라 영역에 있는 랭킹 시스템에 상품 가격 정보를 전달하는 인터페이스를 정의

- Ranking
  - 상품 가격 랭킹 시스템을 위한 모듈
  - 상품 가격 정보를 전달받아 랭킹을 계산하고 저장
  - 랭킹 정보를 조회하는 query 서비스를 제공

# 기능 구현 사항 중 고려했어야 했던 부분 설명

- 카테고리 별 최저가격 브랜드와 상품 가격, 총액을 조회하는 API

  - 최저가격이 여러 브랜드에서 동일한 경우가 있음 ( 스니커즈의 경우 A와 G 브랜드가 가격이 동일함)
  - 최저가격이 여러 브랜드가 있을 경우, 중복되지 않은 브랜드를 선택하도록 구현
  - 구현 시, 성능을 위해 랭킹 시스템의 조회 쿼리를 이용함

- 카테고리 이름으로 최저, 최고 가격 브랜드와 상품 가격을 조회하는 API
  - 검색 결과 최저가 혹은 최고가가 여러 브랜드에서 동일할 수 있음
    - 이 때문에 결과를 리스트로 응답하도록 설계되어 있다고 생각함
  - 구현 시, 성능을 위해 랭킹 시스템의 조회 쿼리를 이용함

# 코드 빌드 및 실행 방법

1. ./gradlew clean build
2. build/libs/musinsa-assignment-0.0.1-SNAPSHOT.jar 파일 실행
   1. java -jar build/libs/musinsa-assignment-0.0.1-SNAPSHOT.jar
   2. h2 접속 (http://localhost:8080/h2-console)
      - JDBC URL: jdbc:h2:mem:product
      - 사용자 이름: sa
      - 비밀번호: 없음
   3. ./src/sql/init.sql 파일의 쿼리 실행

# 테스트 방법

1. ./gradlew test
